<?xml version="1.0" encoding="UTF-8"?>

<FLOW VERSION="3.0" CLEANUP="true">

  <!-- nodes -->

<SEQUENCE EXIT-ON="FAILURE">

  <!-- nodes -->

<INVOKE SERVICE="pub.client:restClient">

  <!-- nodes -->

<MAP MODE="INPUT">

  <!-- nodes -->

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/basePath;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">/gateway/MachineIncident/1.0</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/path;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">/incident</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/httpMethod;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">POST</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="false" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/host;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">env842577.apigw-aw-eu.webmethods.io</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="false" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/consumes;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">application/json</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="false" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/produces;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">application/json</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="false" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/scheme;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">http</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/auth;2;0/apiKey;2;0/in;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">header</value>
</Values>
</DATA>
</MAPSET>

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/auth;2;0/apiKey;2;0/name;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">x-Gateway-APIKey</value>
</Values>
</DATA>
</MAPSET>

<MAPCOPY FROM="/auth;2;0/apiKey;1;0" TO="/auth;2;0/apiKey;2;0/value;1;0">
</MAPCOPY>

<MAPCOPY FROM="/auth;2;0/type;1;0" TO="/auth;2;0/type;1;0">
</MAPCOPY>

<MAPCOPY FROM="/body;4;0;servicemonitor.apis.MachineIncidentAPI_.docTypes:body" TO="/body;2;0">
</MAPCOPY>

<MAPSET OVERWRITE="false" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/radName;1;0">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <value name="xml">servicemonitor.apis:MachineIncidentAPI</value>
</Values>
</DATA>
</MAPSET>
</MAP>

<MAP MODE="OUTPUT">
</MAP>
</INVOKE>

<BRANCH SWITCH="/code">

  <!-- nodes -->

<SEQUENCE NAME="$default" EXIT-ON="FAILURE">

  <!-- nodes -->

<INVOKE SERVICE="pub.flow:clearPipeline">

  <!-- nodes -->

<MAP MODE="INPUT">

  <!-- nodes -->

<MAPSET OVERWRITE="true" VARIABLES="true" GLOBALVARIABLES="false" FIELD="/preserve;1;1">
  <DATA ENCODING="XMLValues" I18N="true">

<Values version="2.0">
  <array name="xml" type="value" depth="1">
    <value>code</value>
    <value>phrase</value>
  </array>
</Values>
</DATA>
</MAPSET>
</MAP>
</INVOKE>
</SEQUENCE>
</BRANCH>
</SEQUENCE>
</FLOW>
